{% extends "base.html" %}
{% block title %}{{ apartment.apt_name }}{% endblock title %}
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet"/>

{% block content %}
<div class="container mt-4">


    {% if not favorite %}
    <form method="post" action="{% url 'favorite_create'  %}">

        {% csrf_token %}
        <input type="hidden" name='apartment' value='{{apartment.id}}'>
        <!-- Add form fields here if necessary -->
        <button type="submit" >
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-through-heart-fill" viewBox="0 0 16 16">
                <path fill-rule="evenodd" d="M2.854 15.854A.5.5 0 0 1 2 15.5V14H.5a.5.5 0 0 1-.354-.854l1.5-1.5A.5.5 0 0 1 2 11.5h1.793l3.103-3.104a.5.5 0 1 1 .708.708L4.5 12.207V14a.5.5 0 0 1-.146.354zM16 3.5a.5.5 0 0 1-.854.354L14 2.707l-1.006 1.006c.236.248.44.531.6.845.562 1.096.585 2.517-.213 4.092-.793 1.563-2.395 3.288-5.105 5.08L8 13.912l-.276-.182A24 24 0 0 1 5.8 12.323L8.31 9.81a1.5 1.5 0 0 0-2.122-2.122L3.657 10.22a9 9 0 0 1-1.039-1.57c-.798-1.576-.775-2.997-.213-4.093C3.426 2.565 6.18 1.809 8 3.233c1.25-.98 2.944-.928 4.212-.152L13.292 2 12.147.854A.5.5 0 0 1 12.5 0h3a.5.5 0 0 1 .5.5z"/>
              </svg>          </button>
    </form>
    
    {% endif %}
    {% if favorite %}
    
    <form method="post" action="{% url 'favorite_delete' favorite.id %}">
        {% csrf_token %}
        <button type="submit"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-heartbreak" viewBox="0 0 16 16">
            <path d="M8.867 14.41c13.308-9.322 4.79-16.563.064-13.824L7 3l1.5 4-2 3L8 15a38 38 0 0 0 .867-.59m-.303-1.01-.971-3.237 1.74-2.608a1 1 0 0 0 .103-.906l-1.3-3.468 1.45-1.813c1.861-.948 4.446.002 5.197 2.11.691 1.94-.055 5.521-6.219 9.922m-1.25 1.137a36 36 0 0 1-1.522-1.116C-5.077 4.97 1.842-1.472 6.454.293c.314.12.618.279.904.477L5.5 3 7 7l-1.5 3zm-2.3-3.06-.442-1.106a1 1 0 0 1 .034-.818l1.305-2.61L4.564 3.35a1 1 0 0 1 .168-.991l1.032-1.24c-1.688-.449-3.7.398-4.456 2.128-.711 1.627-.413 4.55 3.706 8.229Z"/>
          </svg></button>
    </form>
    {% endif %}
    <div class="row">
        <div class="col-md-8">
            <h1>{{ apartment.apt_name }}</h1>
            <p class="lead"><strong>Description:</strong> {{ apartment.description }}</p>
            <div class="row mb-4">
                <div class="col-md-6">
                    <p><strong>Category:</strong> {{ apartment.category }}</p>
                    <p><strong>Rooms:</strong> {{ apartment.rooms }}</p>
                    <p><strong>Beds:</strong> {{ apartment.beds }}</p>
                    {% if apartment.wifi %}
                        <p><strong>Wifi:</strong> Yes</p>
                    {% else %}
                        <p><strong>Wifi:</strong> No</p>
                    {% endif %}
                    {% if apartment.tv %}
                        <p><strong>TV:</strong> Yes</p>
                    {% else %}
                        <p><strong>TV:</strong> No</p>
                    {% endif %}
                </div>
                <div class="col-md-6">
                    <p><strong>City:</strong> {{ apartment.city }}</p>
                    <p><strong>Country:</strong> {{ apartment.country }}</p>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            {% if images %}
                <h2 class="mb-3">Images</h2>
                <div class="row">
                    {% for apt_image in images %}
                        <div class="col-md-6 mb-3">
                            <img src="{{ apt_image.image.url }}" alt="house image" class="img-fluid rounded">
                        </div>
                    {% endfor %}
                </div>
            {% endif %}
        </div>
    </div>
</div>

<div class="container mt-4">
    {% if user.is_authenticated %}
        {% include "../reservations/res_apt.html" %}
        <div class="container mt-4">
            {% include "reviews/list_comment.html" %}
            {% if add_comment %}
            {% include "reviews/add_comment.html" %}

            {% endif %}

        </div>
    {% else %}

        <p class="lead">To book this apartment, please <a href="{% url "users_login" %}?next=/{{apartment.id}}" class="text-primary">log in</a> or <a href="{% url "users_register" %}" class="text-primary">sign up</a>.</p>

    
        {% endif %}
</div>


{% endblock content %}
